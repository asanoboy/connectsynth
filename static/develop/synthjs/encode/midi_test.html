<!DOCTYPE html>
<html>
<head>
<title>synthjs Unit Tests</title>
<script src="../../closure/goog/base.js"></script>
<script src="../../deps.js"></script>
<script>
	goog.require("goog.testing.jsunit");
	goog.require("goog.testing.AsyncTestCase");
	
	goog.require("goog.net.XhrIo.ResponseType");
	goog.require("synthjs.encode.Midi");
	goog.require("synthjs.utility.AjaxDeferred");
</script>
</head>
<body>
<script>

var Midi = synthjs.encode.Midi,
	Ajax = synthjs.utility.AjaxDeferred,
	D = synthjs.utility.Deferred,
	asyncTestCase = new goog.testing.AsyncTestCase.createAndInstall(),
	midipath = "midi_test.mid";

function setUp() {

}

function tearDown() {

}

function testType() {
	var d = new Ajax(midipath, {
		responseType: goog.net.XhrIo.ResponseType.BLOB,
		success: function(e){
			return e.getResponse();
		}
	}).assocChainDeferred( Midi.loadDeferred() )
	.addCallback(function(midi){
		console.log(midi);
		assertTrue(midi instanceof Midi);
		asyncTestCase.continueTesting();
	});

	asyncTestCase.waitForAsync();
	d.callback();	
}

</script>
</body>
</html>
