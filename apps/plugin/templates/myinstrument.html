{% extends "page.html" %}

{% block cssfile %}
{{ block.super }}
{% endblock %}

{% block scriptfile %}
{{ block.super }}
<script type="text/javascript" src="{{ STATIC_URL }}/js/jquery.upload.js"></script>
<script type="text/javascript">

$(function(){
	var $form = $("#ajaxArchiveForm"); 
	$("input.ajaxArchiveFormButton").click(function(){
		$("input[type='file']", $form).upload(
			$form.attr("action"),
			$form.serialize(),
			function(rs){
				document.location = rs.re;
			},
			"json"
		)
	})
	
	// $("body").delegateAjaxFormButtonClick(
		// "input.ajaxRemoteRepogitoryFormButton",
		// "form.ajaxForm",
		// {
			// dataType: "json",
			// success: function(rt){
				// console.log(rt);
			// },
			// error: function(e){
				// console.log(e)				
			// }
		// });
	
	
})
</script>
{% endblock %}

{% block content %}
<h1>My Instruments</h1>
<form id="ajaxArchiveForm" class="ajaxForm" action="{% url upload_instrument_archive %}" method="POST" enctype="multipart/form-data">
{{ archive_form }}
{% csrf_token %}
<input class="ajaxArchiveFormButton" type="button" value="submit">
</form>

{% if 0 %}
<form class="ajaxForm" action="{% url clone_instrument_external %}" method="POST>
{{ remote_form }}
{% csrf_token %}
<input class="ajaxRemoteRepogitoryFormButton" type="button" value="submit">
</form>
{% endif %}

{% endblock %}
